{"ast":null,"code":"var _jsxFileName = \"/Users/spaul/dev/london/my-app/src/D3.tsx\",\n    _s = $RefreshSig$();\n\nimport { Paper } from '@mui/material';\nimport React, { useEffect, useLayoutEffect, useRef, useState } from 'react';\nimport * as d3 from \"d3\";\nimport Streets from './assets/streets.json';\nimport Pumps from './assets/pumps.json';\nimport Deaths from './assets/deaths.json';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst D3 = () => {\n  _s();\n\n  const [height, setHeight] = useState(0);\n  const [width, setWidth] = useState(0);\n  const paperRef = useRef();\n  useLayoutEffect(() => {\n    paperRef.current = document.getElementById(\"paper-plane\");\n\n    if (paperRef.current) {\n      setHeight(paperRef.current.clientHeight);\n      setWidth(paperRef.current.clientWidth);\n    }\n  }, []);\n\n  const createMap = () => {\n    const xScale = d3.scaleLinear().domain([0, 20]).range([0, width]);\n    const yScale = d3.scaleLinear().domain([0, 20]).range([height, 0]);\n    const div = d3.selectAll(\"#paper-plane svg g\"); // .call(d3.zoom().on(\"zoom\", function (e) {\n    //     console.log(e)\n    //     console.log(d3.event)\n    //     div.attr(\"transform\", d3.event.transform)\n    // }));\n\n    div.selectAll(\"svg\").attr(\"width\", width).attr(\"height\", height).append(\"g\"); // streets\n\n    div.selectAll('polygon').data(Streets).enter().append(\"polygon\").style(\"stroke\", \"gray\").style(\"fill\", \"gray\").style(\"stroke-width\", 6).attr(\"points\", d => {\n      let points = \"\";\n      d.forEach((_, i) => points += `${xScale(d[i].x)}, ${yScale(d[i].y)} `);\n      return points;\n    });\n    const tooltip = d3.select(\"#tooltip\").append(\"div\").style(\"position\", \"absolute\").style(\"visibility\", \"hidden\").style(\"padding\", \"3px\").style(\"background\", \"gray\").text(\"\"); //pumps\n\n    div.selectAll('circle').data(Pumps).enter().append('circle').style(\"fill\", \"deepskyblue\").style(\"r\", 8).attr(\"cx\", d => xScale(d.x)).attr(\"cy\", d => yScale(d.y));\n    div.selectAll('text').data(Deaths).enter().append(\"circle\").style(\"fill\", \"red\").style(\"r\", 2).attr(\"cx\", d => xScale(d.x)).attr(\"cy\", d => yScale(d.y)).style(\"cursor\", \"pointer\").on(\"mouseover\", d => tooltip.style(\"visibility\", \"visible\").text(`Age: ${d.age}`)).on(\"mousemove\", d => {\n      return tooltip.style(\"top\", yScale(d.y) - 15 + \"px\").style(\"left\", xScale(d.x) + 15 + \"px\");\n    });\n  };\n\n  useEffect(() => {\n    createMap();\n    console.log(height, width);\n  }, [height, width]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Paper, {\n      id: \"paper-plane\",\n      sx: {\n        p: 2,\n        display: 'flex',\n        height: '80vh'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"svg\", {\n        children: /*#__PURE__*/_jsxDEV(\"g\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 5\n    }, this)\n  }, void 0, false);\n};\n\n_s(D3, \"K3KYby3FabK9dM5wjrdMidr7l8o=\");\n\n_c = D3;\nexport default D3;\n\nvar _c;\n\n$RefreshReg$(_c, \"D3\");","map":{"version":3,"names":["Paper","React","useEffect","useLayoutEffect","useRef","useState","d3","Streets","Pumps","Deaths","D3","height","setHeight","width","setWidth","paperRef","current","document","getElementById","clientHeight","clientWidth","createMap","xScale","scaleLinear","domain","range","yScale","div","selectAll","attr","append","data","enter","style","d","points","forEach","_","i","x","y","tooltip","select","text","on","age","console","log","p","display"],"sources":["/Users/spaul/dev/london/my-app/src/D3.tsx"],"sourcesContent":["import { Paper } from '@mui/material';\nimport React, { useEffect, useLayoutEffect, useRef, useState } from 'react';\nimport * as d3 from \"d3\";\nimport Streets from './assets/streets.json';\nimport Pumps from './assets/pumps.json';\nimport Deaths from './assets/deaths.json';\n\nconst D3 = () => {\n    const [height, setHeight] = useState(0);\n    const [width, setWidth] = useState(0);\n    const paperRef = useRef<HTMLElement | null>();\n\n    useLayoutEffect(() => {\n        paperRef.current = document.getElementById(\"paper-plane\");\n        if (paperRef.current) {\n            setHeight(paperRef.current.clientHeight);\n            setWidth(paperRef.current.clientWidth);\n        }\n    },[])\n\n    const createMap = () => {\n        const xScale = d3.scaleLinear() .domain([0, 20]).range([0, width]);\n        const yScale = d3.scaleLinear() .domain([0, 20]).range([height, 0]);\n        const div = d3.selectAll(\"#paper-plane svg g\")\n        // .call(d3.zoom().on(\"zoom\", function (e) {\n        //     console.log(e)\n        //     console.log(d3.event)\n        //     div.attr(\"transform\", d3.event.transform)\n        // }));\n\n        div.selectAll(\"svg\")\n            .attr(\"width\", width)\n            .attr(\"height\", height)\n            .append(\"g\");\n        \n        // streets\n        div.selectAll('polygon')\n                .data(Streets)\n                .enter()\n                .append(\"polygon\")\n                .style(\"stroke\", \"gray\")\n                .style(\"fill\", \"gray\")\n                .style(\"stroke-width\", 6)\n                .attr(\"points\", d => {\n                    let points = \"\";\n                    d.forEach((_, i) => points += `${xScale(d[i].x)}, ${yScale(d[i].y)} `);\n                    return points;\n                });\n            const tooltip = d3.select(\"#tooltip\")\n                .append(\"div\")\n                    .style(\"position\", \"absolute\")\n                    .style(\"visibility\", \"hidden\")\n                    .style(\"padding\", \"3px\")\n                    .style(\"background\", \"gray\")\n                    .text(\"\");\n\n            //pumps\n            div.selectAll('circle')\n                .data(Pumps)\n                .enter()\n                .append('circle')\n                .style(\"fill\", \"deepskyblue\")\n                .style(\"r\", 8)\n                .attr(\"cx\", d => xScale(d.x))\n                .attr(\"cy\", d => yScale(d.y));\n            \n            div.selectAll('text')\n                .data(Deaths)\n                .enter()\n                .append(\"circle\")\n                .style(\"fill\", \"red\")\n                .style(\"r\", 2)\n                .attr(\"cx\", d => xScale(d.x))\n                .attr(\"cy\", d => yScale(d.y))\n                .style(\"cursor\", \"pointer\")\n                .on(\"mouseover\", (d) => tooltip.style(\"visibility\", \"visible\").text(`Age: ${d.age}`))\n                .on(\"mousemove\", (d) => {\n                    return tooltip.style(\"top\", (yScale(d.y) - 15)+\"px\").style(\"left\",(xScale(d.x) + 15)+\"px\")\n                })\n    }\n\n    useEffect(() => {\n        createMap()\n        console.log(height,width);\n    },[height, width]);\n\n    return <>\n    <Paper\n        id=\"paper-plane\"\n        sx={{\n            p: 2,\n            display: 'flex',\n            height: '80vh',\n        }}>\n        <svg>\n            <g>\n            </g>\n        </svg>\n    </Paper>\n    </>;\n}\n\nexport default D3;"],"mappings":"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"},"metadata":{},"sourceType":"module"}