{"ast":null,"code":"var _jsxFileName = \"/Users/spaul/dev/london/my-app/src/D3.tsx\",\n    _s = $RefreshSig$();\n\nimport { Paper } from '@mui/material';\nimport React, { useEffect, useLayoutEffect, useRef, useState } from 'react';\nimport d3 from 'd3';\nimport Streets from '../assets/streets.json';\nimport Pumps from '../assets/pumps.json';\nimport Deaths from '../assets/deaths.json';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst D3 = () => {\n  _s();\n\n  const [height, setHeight] = useState(0);\n  const [width, setWidth] = useState(0);\n  const paperRef = useRef();\n  useLayoutEffect(() => {\n    paperRef.current = document.getElementById(\"paper-plane\");\n\n    if (paperRef.current) {\n      setHeight(paperRef.current.clientHeight);\n      setWidth(paperRef.current.clientWidth);\n    }\n  }, []);\n\n  const createMap = () => {\n    const margin = {\n      top: 10,\n      right: 30,\n      bottom: 30,\n      left: 60\n    };\n    const xScale = d3.scaleLinear().domain([0, 20]).range([0, width - margin.left - margin.right]);\n    const yScale = d3.scaleLinear().domain([0, 20]).range([height - margin.top - margin.bottom, 0]);\n    const div = d3.selectAll(\"#paper-plane\"); // .call(d3.zoom().on(\"zoom\", function (e) {\n    //     console.log(e)\n    //     console.log(d3.event)\n    //     div.attr(\"transform\", d3.event.transform)\n    // }));\n\n    div.selectAll(\"svg\").attr(\"width\", width + margin.left + margin.right).attr(\"height\", height + margin.top + margin.bottom).append(\"g\"); // streets\n\n    const streets = div.selectAll('polygon').data(Streets).enter().append(\"polygon\").style(\"stroke\", \"gray\").style(\"fill\", \"gray\").style(\"stroke-width\", 6).attr(\"points\", d => {\n      let points = \"\";\n      d.forEach((_, i) => points += `${xScale(d[i].x)}, ${yScale(d[i].y)} `);\n      return points;\n    });\n    const tooltip = d3.select(\"#tooltip\").append(\"div\").style(\"position\", \"absolute\").style(\"visibility\", \"hidden\").style(\"padding\", \"3px\").style(\"background\", \"gray\").text(\"\"); //pumps\n\n    const pumps = div.selectAll('circle').data(Pumps).enter().append('circle').style(\"fill\", \"deepskyblue\").style(\"r\", 8).attr(\"cx\", d => xScale(d.x)).attr(\"cy\", d => yScale(d.y));\n    const deaths = div.selectAll('text').data(Deaths).enter().append(\"circle\").style(\"fill\", \"red\").style(\"r\", 2).attr(\"cx\", d => xScale(d.x)).attr(\"cy\", d => yScale(d.y)).style(\"cursor\", \"pointer\").on(\"mouseover\", d => tooltip.style(\"visibility\", \"visible\").text(`Age: ${d.age}`)).on(\"mousemove\", d => {\n      return tooltip.style(\"top\", yScale(d.y) - 15 + \"px\").style(\"left\", xScale(d.x) + 15 + \"px\");\n    });\n  };\n\n  useEffect(createMap, [height, width]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Paper, {\n      id: \"paper-plane\",\n      sx: {\n        p: 2,\n        display: 'flex',\n        flexDirection: 'column',\n        height: 240\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 5\n    }, this)\n  }, void 0, false);\n};\n\n_s(D3, \"K3KYby3FabK9dM5wjrdMidr7l8o=\");\n\n_c = D3;\nexport default D3;\n\nvar _c;\n\n$RefreshReg$(_c, \"D3\");","map":{"version":3,"names":["Paper","React","useEffect","useLayoutEffect","useRef","useState","d3","Streets","Pumps","Deaths","D3","height","setHeight","width","setWidth","paperRef","current","document","getElementById","clientHeight","clientWidth","createMap","margin","top","right","bottom","left","xScale","scaleLinear","domain","range","yScale","div","selectAll","attr","append","streets","data","enter","style","d","points","forEach","_","i","x","y","tooltip","select","text","pumps","deaths","on","age","p","display","flexDirection"],"sources":["/Users/spaul/dev/london/my-app/src/D3.tsx"],"sourcesContent":["import { Paper } from '@mui/material';\nimport React, { useEffect, useLayoutEffect, useRef, useState } from 'react';\nimport d3 from 'd3';\nimport Streets from '../assets/streets.json';\nimport Pumps from '../assets/pumps.json';\nimport Deaths from '../assets/deaths.json';\n\nconst D3 = () => {\n    const [height, setHeight] = useState(0);\n    const [width, setWidth] = useState(0);\n    const paperRef = useRef<HTMLElement | null>();\n\n    useLayoutEffect(() => {\n        paperRef.current = document.getElementById(\"paper-plane\");\n        if (paperRef.current) {\n            setHeight(paperRef.current.clientHeight);\n            setWidth(paperRef.current.clientWidth);\n        }\n    },[])\n\n    const createMap = () => {\n        const margin = {top: 10, right: 30, bottom: 30, left: 60}\n        const xScale = d3.scaleLinear() .domain([0, 20]).range([0, width - margin.left - margin.right]);\n        const yScale = d3.scaleLinear() .domain([0, 20]).range([height - margin.top - margin.bottom, 0]);\n        const div = d3.selectAll(\"#paper-plane\")\n        // .call(d3.zoom().on(\"zoom\", function (e) {\n        //     console.log(e)\n        //     console.log(d3.event)\n        //     div.attr(\"transform\", d3.event.transform)\n        // }));\n\n        div.selectAll(\"svg\")\n            .attr(\"width\", width + margin.left + margin.right)\n            .attr(\"height\", height + margin.top + margin.bottom)\n            .append(\"g\");\n        \n        // streets\n        const streets = div.selectAll('polygon')\n                .data(Streets)\n                .enter()\n                .append(\"polygon\")\n                .style(\"stroke\", \"gray\")\n                .style(\"fill\", \"gray\")\n                .style(\"stroke-width\", 6)\n                .attr(\"points\", d => {\n                    let points = \"\";\n                    d.forEach((_, i) => points += `${xScale(d[i].x)}, ${yScale(d[i].y)} `);\n                    return points;\n                });\n            const tooltip = d3.select(\"#tooltip\")\n                .append(\"div\")\n                    .style(\"position\", \"absolute\")\n                    .style(\"visibility\", \"hidden\")\n                    .style(\"padding\", \"3px\")\n                    .style(\"background\", \"gray\")\n                    .text(\"\");\n\n            //pumps\n            const pumps = div.selectAll('circle')\n                .data(Pumps)\n                .enter()\n                .append('circle')\n                .style(\"fill\", \"deepskyblue\")\n                .style(\"r\", 8)\n                .attr(\"cx\", d => xScale(d.x))\n                .attr(\"cy\", d => yScale(d.y));\n            \n            const deaths = div.selectAll('text')\n                .data(Deaths)\n                .enter()\n                .append(\"circle\")\n                .style(\"fill\", \"red\")\n                .style(\"r\", 2)\n                .attr(\"cx\", d => xScale(d.x))\n                .attr(\"cy\", d => yScale(d.y))\n                .style(\"cursor\", \"pointer\")\n                .on(\"mouseover\", (d) => tooltip.style(\"visibility\", \"visible\").text(`Age: ${d.age}`))\n                .on(\"mousemove\", (d) => {\n                    return tooltip.style(\"top\", (yScale(d.y) - 15)+\"px\").style(\"left\",(xScale(d.x) + 15)+\"px\")\n                })\n    }\n\n    useEffect(createMap,[height, width]);\n\n    return <>\n    <Paper\n        id=\"paper-plane\"\n        sx={{\n        p: 2,\n        display: 'flex',\n        flexDirection: 'column',\n        height: 240,\n    }}>\n        \n    </Paper>\n    </>;\n}\n\nexport default D3;"],"mappings":"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"},"metadata":{},"sourceType":"module"}